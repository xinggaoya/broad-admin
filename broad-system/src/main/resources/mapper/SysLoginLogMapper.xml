<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.broad.system.mapper.SysLoginLogMapper">


    <select id="findLoginLogList" resultType="com.broad.system.entity.SysLoginLog">
        SELECT
        ll.id,
        ll.username,
        ll.ip,
        ll.location,
        ll.browser,
        ll.os,
        ll.status,
        ll.msg,
        ll.create_time,
        u.nick_name,
        u.avatar,
        u.user_name
        FROM sys_login_log ll
        left join sys_user u on u.id = ll.user_id
        <where>
            <if test="username != null and username != ''">
                and username like concat('%',#{username},'%')
            </if>
            <if test="ip != null and ip != ''">
                and ip like concat('%',#{ip},'%')
            </if>
            <if test="status != null and status != ''">
                and status = #{status}
            </if>
            <if test="beginTime != null and beginTime != ''">
                and create_time <![CDATA[>=]]> #{beginTime}
            </if>
            <if test="endTime != null and endTime != ''">
                and create_time <![CDATA[<=]]> #{endTime}
            </if>
        </where>
        ORDER BY create_time DESC
    </select>
</mapper>

