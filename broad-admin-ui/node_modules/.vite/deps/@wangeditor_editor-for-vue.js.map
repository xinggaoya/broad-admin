{
  "version": 3,
  "sources": ["../../@wangeditor/editor-for-vue/src/utils/create-info.ts", "../../@wangeditor/editor-for-vue/plugin-vue:export-helper", "../../@wangeditor/editor-for-vue/src/components/Editor.vue", "../../@wangeditor/editor-for-vue/src/components/Toolbar.vue"],
  "sourcesContent": ["/**\n * @description \u9519\u8BEF\u63D0\u793A\u4FE1\u606F\n * @author liuqh\n */\nexport function genErrorInfo(fnName: string): string {\n  let info = `\u8BF7\u4F7F\u7528 '@${fnName}' \u4E8B\u4EF6\uFF0C\u4E0D\u8981\u653E\u5728 props \u4E2D`\n  info += `\\nPlease use '@${fnName}' event instead of props`\n  return info\n}", "\nexport default (sfc, props) => {\n  for (const [key, val] of props) {\n    sfc[key] = val\n  }\n  return sfc\n}\n", "<template>\n  <div ref=\"box\" style=\"height: 100%\"></div>\n</template>\n\n<script lang=\"ts\">\nimport { onMounted, defineComponent, ref, PropType, toRaw, watch, shallowRef } from 'vue'\nimport { createEditor, IEditorConfig, SlateDescendant, IDomEditor } from '@wangeditor/editor'\nimport { genErrorInfo } from '../utils/create-info'\n\nexport default defineComponent({\n  props: {\n    /** \u7F16\u8F91\u5668\u6A21\u5F0F */\n    mode: {\n      type: String,\n      default: 'default',\n    },\n    /** \u7F16\u8F91\u5668\u9ED8\u8BA4\u5185\u5BB9 */\n    defaultContent: {\n      type: Array as PropType<SlateDescendant[]>,\n      default: [],\n    },\n    defaultHtml: {\n      type: String,\n      default: '',\n    },\n    /** \u7F16\u8F91\u5668\u9ED8\u8BA4\u914D\u7F6E */\n    defaultConfig: {\n      type: Object as PropType<Partial<IEditorConfig>>,\n      default: {},\n    },\n    /* \u81EA\u5B9A\u4E49 v-model */\n    modelValue: {\n      type: String,\n      default: '',\n    },\n  },\n  setup(props, context) {\n    const box = ref(null) // \u7F16\u8F91\u5668\u5BB9\u5668\n\n    const editorRef = shallowRef<null | IDomEditor>(null) // editor \u5B9E\u4F8B\uFF0C\u5FC5\u987B\u7528 shallowRef\n\n    const curValue = ref('') // \u8BB0\u5F55 editor \u5F53\u524D html \u5185\u5BB9\n\n    /**\n     * \u521D\u59CB\u5316\u7F16\u8F91\u5668\n     */\n    const initEditor = () => {\n      if (!box.value) return\n      // \u83B7\u53D6\u539F\u59CB\u6570\u636E\uFF0C\u89E3\u9664\u54CD\u5E94\u5F0F\u7279\u6027\n      const defaultContent = toRaw(props.defaultContent)\n\n      createEditor({\n        selector: box.value! as Element,\n        mode: props.mode,\n        content: defaultContent || [],\n        html: props.defaultHtml || props.modelValue || '',\n        config: {\n          ...props.defaultConfig,\n          onCreated(editor) {\n            editorRef.value = editor // \u8BB0\u5F55 editor \u5B9E\u4F8B\n\n            context.emit('onCreated', editor)\n\n            if (props.defaultConfig.onCreated) {\n              const info = genErrorInfo('onCreated')\n              throw new Error(info)\n            }\n          },\n          onChange(editor) {\n            const editorHtml = editor.getHtml()\n            curValue.value = editorHtml // \u8BB0\u5F55\u5F53\u524D\u5185\u5BB9\n            context.emit('update:modelValue', editorHtml) // \u89E6\u53D1 v-model \u503C\u53D8\u5316\n\n            context.emit('onChange', editor)\n            if (props.defaultConfig.onChange) {\n              const info = genErrorInfo('onChange')\n              throw new Error(info)\n            }\n          },\n          onDestroyed(editor) {\n            context.emit('onDestroyed', editor)\n            if (props.defaultConfig.onDestroyed) {\n              const info = genErrorInfo('onDestroyed')\n              throw new Error(info)\n            }\n          },\n          onMaxLength(editor) {\n            context.emit('onMaxLength', editor)\n            if (props.defaultConfig.onMaxLength) {\n              const info = genErrorInfo('onMaxLength')\n              throw new Error(info)\n            }\n          },\n          onFocus(editor) {\n            context.emit('onFocus', editor)\n            if (props.defaultConfig.onFocus) {\n              const info = genErrorInfo('onFocus')\n              throw new Error(info)\n            }\n          },\n          onBlur(editor) {\n            context.emit('onBlur', editor)\n            if (props.defaultConfig.onBlur) {\n              const info = genErrorInfo('onBlur')\n              throw new Error(info)\n            }\n          },\n          customAlert(info, type) {\n            context.emit('customAlert', info, type)\n            // @ts-ignore\n            if (props.defaultConfig.customAlert) {\n              const info = genErrorInfo('customAlert')\n              throw new Error(info)\n            }\n          },\n          customPaste: (editor, event): any => {\n            if (props.defaultConfig.customPaste) {\n              const info = genErrorInfo('customPaste')\n              throw new Error(info)\n            }\n            let res\n            context.emit('customPaste', editor, event, (val: boolean) => {\n              res = val\n            })\n            return res\n          },\n        },\n      })\n    }\n\n    /**\n     * \u8BBE\u7F6E HTML\n     * @param newHtml new html\n     */\n    function setHtml(newHtml: string) {\n      const editor = editorRef.value\n      if (editor == null) return\n      editor.setHtml(newHtml)\n    }\n\n    /**\n     * \u5143\u7D20\u6302\u5728\u540E\u521D\u59CB\u5316\u7F16\u8F91\u5668\n     */\n    onMounted(() => {\n      initEditor()\n    })\n\n    // \u76D1\u542C v-model \u503C\u53D8\u5316\n    watch(\n      () => props.modelValue,\n      newVal => {\n        if (newVal === curValue.value) return // \u548C\u5F53\u524D\u5185\u5BB9\u4E00\u6837\uFF0C\u5219\u5FFD\u7565\n\n        // \u91CD\u65B0\u8BBE\u7F6E HTML\n        setHtml(newVal)\n      }\n    )\n\n    return {\n      box,\n    }\n  },\n})\n</script>\n", "<template>\n  <div ref=\"selector\"></div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, ref, watchEffect, PropType } from 'vue'\nimport { createToolbar, IToolbarConfig, IDomEditor, DomEditor } from '@wangeditor/editor'\n\nexport default defineComponent({\n  props: {\n    // editor \u5B9E\u4F8B\n    editor: {\n      type: Object as PropType<IDomEditor>\n    },\n    /** \u7F16\u8F91\u5668\u6A21\u5F0F */\n    mode: {\n      type: String,\n      default: 'default',\n    },\n    /** \u7F16\u8F91\u5668\u9ED8\u8BA4\u914D\u7F6E */\n    defaultConfig: {\n      type: Object as PropType<Partial<IToolbarConfig>>,\n      default: {},\n    },\n  },\n  setup(props) {\n    // toolbar \u5BB9\u5668\n    const selector = ref(null)\n\n    /**\n     * \u521D\u59CB\u5316 toolbar\n     */\n    const create = (editor: IDomEditor) => {\n      if (!selector.value) return\n      if (editor == null) {\n        throw new Error('Not found instance of Editor when create <Toolbar/> component')\n      }\n      if (DomEditor.getToolbar(editor)) return // \u4E0D\u91CD\u590D\u521B\u5EFA\n\n      createToolbar({\n        editor,\n        selector: (selector.value! as Element) || '<div></div>',\n        mode: props.mode,\n        config: props.defaultConfig,\n      })\n    }\n\n    watchEffect( () => {\n      const { editor } = props\n      if (editor == null) return\n      create(editor) // \u521D\u59CB\u5316 toolbar\n    })\n\n    return {\n      selector,\n    }\n  },\n})\n</script>\n"],
  "mappings": "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",
  "names": []
}
